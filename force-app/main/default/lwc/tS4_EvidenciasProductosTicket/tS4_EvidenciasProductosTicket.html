<template>
    <div class="slds-p-around_medium">
        <div class="slds-text-heading_medium slds-m-bottom_medium">
            Cargador de Imágenes (Mínimo 8, Máximo 10)
        </div>
        
        <div class="slds-m-bottom_medium">
            <input type="file" accept="image/*" multiple onchange={handleFileChange} 
                   class="slds-file-selector__input slds-assistive-text" 
                   id="fileUpload" 
                   disabled={isMaxImagesReached}/>
            <label for="fileUpload" class="slds-button slds-button_neutral">
                Seleccionar Imágenes
            </label>
        </div>

        <div class="slds-grid slds-wrap slds-gutters">
            <template for:each={images} for:item="image">
                <div key={image.id} class="slds-col slds-size_1-of-3 slds-m-bottom_medium">
                    <div class="slds-box slds-box_small">
                        <div class="slds-grid slds-grid_vertical">
                            <div class="slds-m-bottom_x-small">
                                <img src={image.src} alt="Imagen cargada" style="width: 100%; height: auto; max-height: 200px; object-fit: contain;"/>
                            </div>
                            <div class="slds-grid slds-grid_align-end">
                                <button class="slds-button slds-button_destructive" 
                                        onclick={handleRemoveImage} 
                                        data-id={image.id}>
                                    Borrar
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </template>
        </div>

        <div class="slds-m-top_medium">
            <button class="slds-button slds-button_brand" 
                    onclick={handleUpload} 
                    disabled={isUploadDisabled}>
                Cargar Evidencias
            </button>
        </div>
    </div>
</template>